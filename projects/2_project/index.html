<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Colorizing Prokudin-Gorskii | Cyprian Zander </title> <meta name="author" content="Cyprian Zander"> <meta name="description" content="Cyprian Zander"> <meta name="keywords" content="machine-learning, computer-science, berkeley, uc-berkeley, portfolio, research, data-science, software-engineering, academic, publications, artificial-intelligence, deep-learning, neural-networks, python, programming, algorithms, statistics, mathematics, cs-student, undergraduate, research-assistant, github, open-source, technical-writing, academic-website, personal-website, student-portfolio, cs180, cs61a, cs61b, cs70, cs188, cs189, launchpad, berkeley-launchpad, startup, entrepreneurship, technology, innovation, stem, education, university, california, bay-area, silicon-valley"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/favico.ico?ba4125972f729e5643234e8f9a65339e"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://zanderfilet.github.io/projects/2_project/"> <script src="/assets/js/theme.js?a81d82887dd692e91686b43de4542f18"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Cyprian</span> Zander </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/books/">bookshelf </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/photography/">photography </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Colorizing Prokudin-Gorskii</h1> <p class="post-description">Cyprian Zander</p> </header> <article> <h3 id="overview">Overview</h3> <p>The goal of this project is to automatically reconstruct color photographs from the filtered glass plate negatives of Sergei Mikhailovich Prokudin-Gorskii, an early 20th century photographer. Each negative contains three separate exposures of images taken through blue, green, and red filters (from top to bottom). Since I need to stitch these components together, the primary challenge of this project is calculating how each exposure is displaced to correctly align each color filter. Later, I extend on this algorithm with some optimizations, color correction, and cropping in postprocessing.</p> <hr> <h3 id="input-and-preprocessing">Input and preprocessing</h3> <div class="text-center my-4"> <div class="row justify-content-center"> <div class="col-sm-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/emir_in-480.webp 480w,/assets/img/cs180/p1/emir_in-800.webp 800w,/assets/img/cs180/p1/emir_in-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/emir_in.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Sample original glass plate (blue, green, red from top to bottom)" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> </div> <div class="caption text-center mt-2"> Emir of Bukhara (1911), sample original glass plate (blue, green, red from top to bottom) </div> <p>Before running our alignment algorithms, we simply divide the raw digitzed negative into thirds, since this approximately correctly divides each color filter into their respective color filter category.</p> <div class="row"> <div class="col-sm-4 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/emir_01_blue_channel-480.webp 480w,/assets/img/cs180/p1/emir_01_blue_channel-800.webp 800w,/assets/img/cs180/p1/emir_01_blue_channel-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/emir_01_blue_channel.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Blue channel" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm-4 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/emir_02_green_channel-480.webp 480w,/assets/img/cs180/p1/emir_02_green_channel-800.webp 800w,/assets/img/cs180/p1/emir_02_green_channel-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/emir_02_green_channel.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Green channel" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm-4 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/emir_03_red_channel-480.webp 480w,/assets/img/cs180/p1/emir_03_red_channel-800.webp 800w,/assets/img/cs180/p1/emir_03_red_channel-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/emir_03_red_channel.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Red channel" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption text-center mt-3"> Blue, green, red, respectively </div> <hr> <h3 id="part-1-alignment-metrics">Part 1: Alignment Metrics</h3> <p>My first approach focusses on minimizing the L2 Norm between a reference filter (green) to the other two filters. This metric simply evaluates the aggregate Euclidean distance between the reference and the target filter, which generally works well, but is highly sensitive to brightness differences between channels (i.e., matching based on the Emir’s robe above is not great for L2).</p> <p>My second approach focusses on maximizing normalized cross-correlation (NCC), which is more robust, since it is invariant to linear changes in brightness and contrast. This method was generally more effective, since different color filters produce varying intensities.</p> <h5 id="l2-norm">L2 Norm</h5> \[E(\Delta x, \Delta y) = \sum_{x,y} \Big( R(x,y) - F(x+\Delta x, y+\Delta y) \Big)^2\] <p>We minimize $E(\Delta x, \Delta y)$ to find the displacement $(\Delta x, \Delta y)$ where the shifted filter $F$ best overlaps with the reference $R$.</p> <h5 id="normalized-cross-correlation-ncc">Normalized Cross-Correlation (NCC)</h5> \[\text{NCC}(\Delta x, \Delta y) = \frac{\sum_{x,y} \big(R(x,y) - \bar{R}\big)\big(F(x+\Delta x, y+\Delta y) - \bar{F}\big)} {\sqrt{\sum_{x,y} \big(R(x,y) - \bar{R}\big)^2} \, \sqrt{\sum_{x,y} \big(F(x+\Delta x, y+\Delta y) - \bar{F}\big)^2}}\] <p>We maximize $\text{NCC}(\Delta x, \Delta y)$ to find the displacement that yields the strongest correlation between $R$ and $F$, regardless of brightness or contrast differences.</p> <h5 id="variables">Variables</h5> <ul> <li> <strong>$R(x,y)$:</strong> Reference filter/channel (kept fixed, e.g. green).</li> <li> <strong>$F(x+\Delta x, y+\Delta y)$:</strong> Filter/channel being aligned (shifted version of red or blue).</li> <li> <strong>$(\Delta x, \Delta y)$:</strong> Displacement vector we are solving for.</li> <li> <strong>$\bar{R}, \bar{F}$:</strong> Mean pixel intensities of $R$ and $F$, used for normalization in NCC.</li> </ul> <hr> <h3 id="small-image-examples">Small Image Examples</h3> <p>Here are some first outputs I achieved with these two approaches.</p> <div class="row"> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/monastery_pyramid_L2_level4-480.webp 480w,/assets/img/cs180/p1/monastery_pyramid_L2_level4-800.webp 800w,/assets/img/cs180/p1/monastery_pyramid_L2_level4-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/monastery_pyramid_L2_level4.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Monastery Pyramid, L2 Norm" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption text-center mt-2"> Monastery, L2 Norm </div> </div> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/monastery_pyramid_NCC_level4-480.webp 480w,/assets/img/cs180/p1/monastery_pyramid_NCC_level4-800.webp 800w,/assets/img/cs180/p1/monastery_pyramid_NCC_level4-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/monastery_pyramid_NCC_level4.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="NCC" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption text-center mt-2"> NCC </div> </div> </div> <div class="row"> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/tobolsk_pyramid_L2_level4-480.webp 480w,/assets/img/cs180/p1/tobolsk_pyramid_L2_level4-800.webp 800w,/assets/img/cs180/p1/tobolsk_pyramid_L2_level4-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/tobolsk_pyramid_L2_level4.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="L2 Norm" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption text-center mt-2"> Tobolsk, L2 Norm </div> </div> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/tobolsk_pyramid_NCC_level4-480.webp 480w,/assets/img/cs180/p1/tobolsk_pyramid_NCC_level4-800.webp 800w,/assets/img/cs180/p1/tobolsk_pyramid_NCC_level4-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/tobolsk_pyramid_NCC_level4.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="NCC" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption text-center mt-2"> NCC </div> </div> </div> <div class="row"> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/cathedral_pyramid_L2_level4-480.webp 480w,/assets/img/cs180/p1/cathedral_pyramid_L2_level4-800.webp 800w,/assets/img/cs180/p1/cathedral_pyramid_L2_level4-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/cathedral_pyramid_L2_level4.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="L2 Norm" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption text-center mt-2"> Cathedral, L2 Norm </div> </div> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/cathedral_pyramid_NCC_level4-480.webp 480w,/assets/img/cs180/p1/cathedral_pyramid_NCC_level4-800.webp 800w,/assets/img/cs180/p1/cathedral_pyramid_NCC_level4-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/cathedral_pyramid_NCC_level4.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="NCC" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption text-center mt-2"> NCC </div> </div> </div> <p>Below are the filter displacements found by both approaches.</p> <table> <thead> <tr> <th>Image Name</th> <th>L2 Blue Displacement</th> <th>L2 Green Displacement</th> <th>L2 Red Displacement</th> <th>NCC Blue Displacement</th> <th>NCC Green Displacement</th> <th>NCC Red Displacement</th> </tr> </thead> <tbody> <tr> <td>monastery</td> <td>(3, -2)</td> <td>(0, 0)</td> <td>(6, 1)</td> <td>(3, -2)</td> <td>(0, 0)</td> <td>(6, 1)</td> </tr> <tr> <td>tobolsk</td> <td>(-3, -3)</td> <td>(0, 0)</td> <td>(4, 1)</td> <td>(-3, -3)</td> <td>(0, 0)</td> <td>(4, 1)</td> </tr> <tr> <td>cathedral</td> <td>(-5, -2)</td> <td>(0, 0)</td> <td>(7, 1)</td> <td>(-5, -2)</td> <td>(0, 0)</td> <td>(7, 1)</td> </tr> </tbody> </table> <hr> <h3 id="part-3-coarse-to-fine-pyramid-search">Part 3: Coarse-to-Fine Pyramid Search</h3> <p>The next challenge is that searching for the correct alignment on large images by checking every possible shift is too slow. To speed this up, I use an image pyramid. This approach starts by finding a rough alignment on a small, downscaled version of the image, which is very fast. This rough alignment is then used to guide a more focused search on a larger, higher-resolution version. By repeating this process from coarse to fine, I can quickly and accurately align the full-resolution image, even when the initial misalignment is large.</p> <p>The process begins by applying a Gaussian blur with $\sigma = 1$ to the image. This is an anti-aliasing filter to reduce artifacts when the image is downscaled. I use a rescaling factor of 0.5, meaning each level of the pyramid is half the width and height of the one above it, and all larger images in the dataset are constructed with 4 levels. The alignment starts at the smallest scale, performing a search within a +/- 15 pixel displacement range in both x and y to find a coarse alignment. This calculated displacement is then doubled and propagated to the next higher-resolution level, where it is used to shift the image. A search with a smaller displacement range of +/- 2 pixels then refines the alignment. This process of scaling the displacement and performing a fine-tuned local search is repeated until the original, full-resolution image is reached.</p> <h5 id="pyramid-search-time-optimization">Pyramid Search Time Optimization</h5> <div class="my-4"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/optimization_graph-480.webp 480w,/assets/img/cs180/p1/optimization_graph-800.webp 800w,/assets/img/cs180/p1/optimization_graph-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/optimization_graph.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Time improvement graph" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="caption text-center mt-2"> Time complexity comparison showing the speed improvement of pyramid search across levels with abovementioned hyperparameters. Level 2 onwards converges to an accurate displacement result. </div> <hr> <h3 id="full-gallery">Full Gallery</h3> <div class="row"> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/church_pyramid_L2_level4-480.webp 480w,/assets/img/cs180/p1/church_pyramid_L2_level4-800.webp 800w,/assets/img/cs180/p1/church_pyramid_L2_level4-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/church_pyramid_L2_level4.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Church, L2 Norm" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption text-center mt-2"> Church, L2 Norm </div> </div> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/church_pyramid_NCC_level4-480.webp 480w,/assets/img/cs180/p1/church_pyramid_NCC_level4-800.webp 800w,/assets/img/cs180/p1/church_pyramid_NCC_level4-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/church_pyramid_NCC_level4.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Church NCC" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption text-center mt-2"> NCC </div> </div> </div> <div class="row"> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/emir_pyramid_L2_level4-480.webp 480w,/assets/img/cs180/p1/emir_pyramid_L2_level4-800.webp 800w,/assets/img/cs180/p1/emir_pyramid_L2_level4-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/emir_pyramid_L2_level4.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Emir, L2 Norm" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption text-center mt-2"> Emir, L2 Norm </div> </div> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/emir_pyramid_NCC_level4-480.webp 480w,/assets/img/cs180/p1/emir_pyramid_NCC_level4-800.webp 800w,/assets/img/cs180/p1/emir_pyramid_NCC_level4-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/emir_pyramid_NCC_level4.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Emir NCC" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption text-center mt-2"> NCC </div> </div> </div> <div class="row"> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/harvesters_pyramid_L2_level4-480.webp 480w,/assets/img/cs180/p1/harvesters_pyramid_L2_level4-800.webp 800w,/assets/img/cs180/p1/harvesters_pyramid_L2_level4-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/harvesters_pyramid_L2_level4.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Harvesters, L2 Norm" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption text-center mt-2"> Harvesters, L2 Norm </div> </div> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/harvesters_pyramid_NCC_level4-480.webp 480w,/assets/img/cs180/p1/harvesters_pyramid_NCC_level4-800.webp 800w,/assets/img/cs180/p1/harvesters_pyramid_NCC_level4-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/harvesters_pyramid_NCC_level4.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Harvesters NCC" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption text-center mt-2"> NCC </div> </div> </div> <div class="row"> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/icon_pyramid_L2_level4-480.webp 480w,/assets/img/cs180/p1/icon_pyramid_L2_level4-800.webp 800w,/assets/img/cs180/p1/icon_pyramid_L2_level4-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/icon_pyramid_L2_level4.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Icon, L2 Norm" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption text-center mt-2"> Icon, L2 Norm </div> </div> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/icon_pyramid_NCC_level4-480.webp 480w,/assets/img/cs180/p1/icon_pyramid_NCC_level4-800.webp 800w,/assets/img/cs180/p1/icon_pyramid_NCC_level4-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/icon_pyramid_NCC_level4.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Icon NCC" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption text-center mt-2"> NCC </div> </div> </div> <div class="row"> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/italil_pyramid_L2_level4-480.webp 480w,/assets/img/cs180/p1/italil_pyramid_L2_level4-800.webp 800w,/assets/img/cs180/p1/italil_pyramid_L2_level4-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/italil_pyramid_L2_level4.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Italil, L2 Norm" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption text-center mt-2"> Italil, L2 Norm </div> </div> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/italil_pyramid_NCC_level4-480.webp 480w,/assets/img/cs180/p1/italil_pyramid_NCC_level4-800.webp 800w,/assets/img/cs180/p1/italil_pyramid_NCC_level4-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/italil_pyramid_NCC_level4.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Italil NCC" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption text-center mt-2"> NCC </div> </div> </div> <div class="row"> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/lastochikino_pyramid_L2_level4-480.webp 480w,/assets/img/cs180/p1/lastochikino_pyramid_L2_level4-800.webp 800w,/assets/img/cs180/p1/lastochikino_pyramid_L2_level4-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/lastochikino_pyramid_L2_level4.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Lastochikino, L2 Norm" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption text-center mt-2"> Lastochikino, L2 Norm </div> </div> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/lastochikino_pyramid_NCC_level4-480.webp 480w,/assets/img/cs180/p1/lastochikino_pyramid_NCC_level4-800.webp 800w,/assets/img/cs180/p1/lastochikino_pyramid_NCC_level4-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/lastochikino_pyramid_NCC_level4.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Lastochikino NCC" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption text-center mt-2"> NCC </div> </div> </div> <div class="row"> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/lugano_pyramid_L2_level4-480.webp 480w,/assets/img/cs180/p1/lugano_pyramid_L2_level4-800.webp 800w,/assets/img/cs180/p1/lugano_pyramid_L2_level4-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/lugano_pyramid_L2_level4.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Lugano, L2 Norm" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption text-center mt-2"> Lugano, L2 Norm </div> </div> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/lugano_pyramid_NCC_level4-480.webp 480w,/assets/img/cs180/p1/lugano_pyramid_NCC_level4-800.webp 800w,/assets/img/cs180/p1/lugano_pyramid_NCC_level4-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/lugano_pyramid_NCC_level4.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Lugano NCC" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption text-center mt-2"> NCC </div> </div> </div> <div class="row"> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/melons_pyramid_L2_level4-480.webp 480w,/assets/img/cs180/p1/melons_pyramid_L2_level4-800.webp 800w,/assets/img/cs180/p1/melons_pyramid_L2_level4-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/melons_pyramid_L2_level4.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Melons, L2 Norm" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption text-center mt-2"> Melons, L2 Norm </div> </div> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/melons_pyramid_NCC_level4-480.webp 480w,/assets/img/cs180/p1/melons_pyramid_NCC_level4-800.webp 800w,/assets/img/cs180/p1/melons_pyramid_NCC_level4-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/melons_pyramid_NCC_level4.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Melons NCC" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption text-center mt-2"> NCC </div> </div> </div> <div class="row"> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/self_portrait_pyramid_L2_level4-480.webp 480w,/assets/img/cs180/p1/self_portrait_pyramid_L2_level4-800.webp 800w,/assets/img/cs180/p1/self_portrait_pyramid_L2_level4-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/self_portrait_pyramid_L2_level4.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Self Portrait, L2 Norm" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption text-center mt-2"> Self Portrait, L2 Norm </div> </div> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/self_portrait_pyramid_NCC_level4-480.webp 480w,/assets/img/cs180/p1/self_portrait_pyramid_NCC_level4-800.webp 800w,/assets/img/cs180/p1/self_portrait_pyramid_NCC_level4-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/self_portrait_pyramid_NCC_level4.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Self Portrait NCC" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption text-center mt-2"> NCC </div> </div> </div> <div class="row"> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/siren_pyramid_L2_level4-480.webp 480w,/assets/img/cs180/p1/siren_pyramid_L2_level4-800.webp 800w,/assets/img/cs180/p1/siren_pyramid_L2_level4-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/siren_pyramid_L2_level4.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Siren, L2 Norm" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption text-center mt-2"> Siren, L2 Norm </div> </div> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/siren_pyramid_NCC_level4-480.webp 480w,/assets/img/cs180/p1/siren_pyramid_NCC_level4-800.webp 800w,/assets/img/cs180/p1/siren_pyramid_NCC_level4-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/siren_pyramid_NCC_level4.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Siren NCC" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption text-center mt-2"> NCC </div> </div> </div> <div class="row"> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/three_generations_pyramid_L2_level4-480.webp 480w,/assets/img/cs180/p1/three_generations_pyramid_L2_level4-800.webp 800w,/assets/img/cs180/p1/three_generations_pyramid_L2_level4-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/three_generations_pyramid_L2_level4.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Three Generations, L2 Norm" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption text-center mt-2"> Three Generations, L2 Norm </div> </div> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/three_generations_pyramid_NCC_level4-480.webp 480w,/assets/img/cs180/p1/three_generations_pyramid_NCC_level4-800.webp 800w,/assets/img/cs180/p1/three_generations_pyramid_NCC_level4-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/three_generations_pyramid_NCC_level4.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Three Generations NCC" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption text-center mt-2"> NCC </div> </div> </div> <p>Below are the filter displacements found by both approaches.</p> <table> <thead> <tr> <th>Image Name</th> <th>L2 Blue Displacement</th> <th>L2 Green Displacement</th> <th>L2 Red Displacement</th> <th>NCC Blue Displacement</th> <th>NCC Green Displacement</th> <th>NCC Red Displacement</th> </tr> </thead> <tbody> <tr> <td>emir</td> <td>(-49, -24)</td> <td>(0, 0)</td> <td>(57, 17)</td> <td>(-49, -24)</td> <td>(0, 0)</td> <td>(57, 17)</td> </tr> <tr> <td>italil</td> <td>(-38, -21)</td> <td>(0, 0)</td> <td>(39, 15)</td> <td>(-38, -21)</td> <td>(0, 0)</td> <td>(39, 15)</td> </tr> <tr> <td>church</td> <td>(-25, -4)</td> <td>(0, 0)</td> <td>(33, -8)</td> <td>(-25, -4)</td> <td>(0, 0)</td> <td>(33, -8)</td> </tr> <tr> <td>three_generations</td> <td>(-53, -14)</td> <td>(0, 0)</td> <td>(59, -3)</td> <td>(-53, -14)</td> <td>(0, 0)</td> <td>(59, -3)</td> </tr> <tr> <td>lugano</td> <td>(-41, 16)</td> <td>(0, 0)</td> <td>(53, -13)</td> <td>(-41, 16)</td> <td>(0, 0)</td> <td>(52, -13)</td> </tr> <tr> <td>melons</td> <td>(-82, -11)</td> <td>(0, 0)</td> <td>(96, 3)</td> <td>(-82, -11)</td> <td>(0, 0)</td> <td>(96, 3)</td> </tr> <tr> <td>lastochikino</td> <td>(3, 2)</td> <td>(0, 0)</td> <td>(78, -7)</td> <td>(3, 2)</td> <td>(0, 0)</td> <td>(78, -7)</td> </tr> <tr> <td>icon</td> <td>(-41, -17)</td> <td>(0, 0)</td> <td>(48, 5)</td> <td>(-41, -17)</td> <td>(0, 0)</td> <td>(48, 5)</td> </tr> <tr> <td>siren</td> <td>(-50, 6)</td> <td>(0, 0)</td> <td>(47, -19)</td> <td>(-49, 6)</td> <td>(0, 0)</td> <td>(47, -19)</td> </tr> <tr> <td>self_portrait</td> <td>(-79, -29)</td> <td>(0, 0)</td> <td>(98, 8)</td> <td>(-79, -29)</td> <td>(0, 0)</td> <td>(98, 8)</td> </tr> <tr> <td>harvesters</td> <td>(-59, -17)</td> <td>(0, 0)</td> <td>(65, -3)</td> <td>(-59, -17)</td> <td>(0, 0)</td> <td>(65, -3)</td> </tr> </tbody> </table> <hr> <h3 id="bells--whistles">Bells &amp; Whistles</h3> <h5 id="automatic-contrast">Automatic Contrast</h5> <p>From these results, I wanted to extend on the project, by improving the contrast in an image by spreading out the most frequent intensity values. I achieved this by equalizing the histograms of all three color filters, making the distribution of pixel intensities more uniform.</p> <p>Histogram equalization works by transforming the pixel intensities based on their own distribution. First, a histogram of the image’s pixel intensities is computed, which is used to calculate the CDF (the cumulative sum of pixel counts up to each intensity level). The CDF is normalized, creating a transfer function that maps the original intensity values to a new range. Each pixel’s intensity in the original image is then replaced by its corresponding value from the normalized CDF. This remapping effectively spreads out the most frequent intensity values, stretching the distribution across the full dynamic range.</p> <h5 id="automatic-cropping">Automatic Cropping</h5> <p>To eliminate the discolored border artifacts created by the channel alignment process, I apply an automatic cropping procedure to the final colorized image. This method simply removes a 5% margin from all edges of the image, resulting in a cleaner final output.</p> <hr> <h3 id="select-images-with-automatic-contrast-and-cropping">Select Images with Automatic Contrast and Cropping</h3> <div class="my-4"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/emir_pyramid_NCC_level4_eq_cropped-480.webp 480w,/assets/img/cs180/p1/emir_pyramid_NCC_level4_eq_cropped-800.webp 800w,/assets/img/cs180/p1/emir_pyramid_NCC_level4_eq_cropped-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/emir_pyramid_NCC_level4_eq_cropped.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Emir Final" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="caption text-center mt-2"> Emir of Bukhara (NCC-lvl4+Hist_Eq+Cropped) </div> <div class="my-4"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/italil_pyramid_NCC_level4_eq_cropped-480.webp 480w,/assets/img/cs180/p1/italil_pyramid_NCC_level4_eq_cropped-800.webp 800w,/assets/img/cs180/p1/italil_pyramid_NCC_level4_eq_cropped-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/italil_pyramid_NCC_level4_eq_cropped.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Italil Final" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="caption text-center mt-2"> Italil (NCC-lvl4+Hist_Eq+Cropped) </div> <div class="my-4"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/lugano_pyramid_NCC_level4_eq_cropped-480.webp 480w,/assets/img/cs180/p1/lugano_pyramid_NCC_level4_eq_cropped-800.webp 800w,/assets/img/cs180/p1/lugano_pyramid_NCC_level4_eq_cropped-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/lugano_pyramid_NCC_level4_eq_cropped.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Lugano Final" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="caption text-center mt-2"> Lugano (NCC-lvl4+Hist_Eq+Cropped) </div> <hr> <h3 id="additional-images-from-loc-collection">Additional Images From LoC Collection</h3> <p>Below are some additional photos I selected from the collection.</p> <div class="my-4"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/lugano2_pyramid_NCC_level4_eq_cropped-480.webp 480w,/assets/img/cs180/p1/lugano2_pyramid_NCC_level4_eq_cropped-800.webp 800w,/assets/img/cs180/p1/lugano2_pyramid_NCC_level4_eq_cropped-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/lugano2_pyramid_NCC_level4_eq_cropped.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Group Final" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="caption text-center mt-2"> Lugano 2, 1905-1015 </div> <div class="my-4"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/khan_pyramid_NCC_level4_eq_cropped-480.webp 480w,/assets/img/cs180/p1/khan_pyramid_NCC_level4_eq_cropped-800.webp 800w,/assets/img/cs180/p1/khan_pyramid_NCC_level4_eq_cropped-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/khan_pyramid_NCC_level4_eq_cropped.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Group Final" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="caption text-center mt-2"> Khan of the Russian protectorate of Khorezm (Khiva), 1910-1915 </div> <div class="my-4"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/group_pyramid_NCC_level4_eq_cropped-480.webp 480w,/assets/img/cs180/p1/group_pyramid_NCC_level4_eq_cropped-800.webp 800w,/assets/img/cs180/p1/group_pyramid_NCC_level4_eq_cropped-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/group_pyramid_NCC_level4_eq_cropped.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Group Final" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="caption text-center mt-2"> Sergeĭ Mikhaĭlovich Prokudin-Gorskiĭ and two men in Cossak dress seated on the ground, 1915 </div> <div class="my-4"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/molodoi_pyramid_NCC_level4_eq_cropped-480.webp 480w,/assets/img/cs180/p1/molodoi_pyramid_NCC_level4_eq_cropped-800.webp 800w,/assets/img/cs180/p1/molodoi_pyramid_NCC_level4_eq_cropped-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/molodoi_pyramid_NCC_level4_eq_cropped.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Group Final" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="caption text-center mt-2"> Young Bashkir, 1910 </div> <div class="my-4"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p1/sheksna_pyramid_NCC_level4_eq_cropped-480.webp 480w,/assets/img/cs180/p1/sheksna_pyramid_NCC_level4_eq_cropped-800.webp 800w,/assets/img/cs180/p1/sheksna_pyramid_NCC_level4_eq_cropped-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p1/sheksna_pyramid_NCC_level4_eq_cropped.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Group Final" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="caption text-center mt-2"> Crew of the steamship "Sheksna" of the M.P.S. [Ministry of Communication and Transportation], 1909 </div> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Cyprian Zander. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?c8a01c11a92744d44b093fc3bda915df" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>