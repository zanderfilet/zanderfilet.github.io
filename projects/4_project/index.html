<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> (Auto)stitching and Photo Mosaics | Cyprian Zander </title> <meta name="author" content="Cyprian Zander"> <meta name="description" content="Cyprian Zander"> <meta name="keywords" content="machine-learning, computer-science, berkeley, uc-berkeley, portfolio, research, data-science, software-engineering, academic, publications, artificial-intelligence, deep-learning, neural-networks, python, programming, algorithms, statistics, mathematics, cs-student, undergraduate, research-assistant, github, open-source, technical-writing, academic-website, personal-website, student-portfolio, cs180, cs61a, cs61b, cs70, cs188, cs189, launchpad, berkeley-launchpad, startup, entrepreneurship, technology, innovation, stem, education, university, california, bay-area, silicon-valley"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/favico.ico?ba4125972f729e5643234e8f9a65339e"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://zanderfilet.github.io/projects/4_project/"> <script src="/assets/js/theme.js?a81d82887dd692e91686b43de4542f18"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Cyprian</span> Zander </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/books/">bookshelf </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/photography/">photography </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">(Auto)stitching and Photo Mosaics</h1> <p class="post-description">Cyprian Zander</p> </header> <article> <h3 id="overview">Overview</h3> <p>In this project, I explored image warping and mosaicking techniques using homographies and interpolation methods. The project involved computing homographies to align images, warping images with nearest-neighbor and bilinear interpolation, and creating seamless mosaics by blending multiple images.</p> <hr> <h3 id="part-a">Part A:</h3> <h4 id="a1-the-pictures">A.1 The Pictures</h4> <p>I took these three sets of images, trying my best to rotate around the focal point of the camera lens to minimize distortions in the overlapping image segments.</p> <div class="row"> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p3/campanile_set/r2-480.webp 480w,/assets/img/cs180/p3/campanile_set/r2-800.webp 800w,/assets/img/cs180/p3/campanile_set/r2-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p3/campanile_set/r2.jpeg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="1" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p3/campanile_set/r4-480.webp 480w,/assets/img/cs180/p3/campanile_set/r4-800.webp 800w,/assets/img/cs180/p3/campanile_set/r4-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p3/campanile_set/r4.jpeg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="2" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p3/11/campanile_set/r6-480.webp 480w,/assets/img/cs180/p3/11/campanile_set/r6-800.webp 800w,/assets/img/cs180/p3/11/campanile_set/r6-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p3/11/campanile_set/r6.jpeg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="3" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p class="text-center">Campanile set.</p> <div class="row"> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p3/room_set/r2.JPG" sizes="95vw"></source> <img src="/assets/img/cs180/p3/room_set/r2.JPG" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="1" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p3/room_set/r4.JPG" sizes="95vw"></source> <img src="/assets/img/cs180/p3/room_set/r4.JPG" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="2" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p3/11/room_set/r6.JPG" sizes="95vw"></source> <img src="/assets/img/cs180/p3/11/room_set/r6.JPG" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="3" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p class="text-center">Room set.</p> <div class="row"> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p3/balcony_set/r2.JPG" sizes="95vw"></source> <img src="/assets/img/cs180/p3/balcony_set/r2.JPG" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="1" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p3/balcony_set/r4.JPG" sizes="95vw"></source> <img src="/assets/img/cs180/p3/balcony_set/r4.JPG" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="2" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p3/11/balcony_set/r6.JPG" sizes="95vw"></source> <img src="/assets/img/cs180/p3/11/balcony_set/r6.JPG" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="3" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p class="text-center">Room set.</p> <h6 id="a20-establishing-point-correspondences">A.2.0 Establishing Point Correspondences</h6> <p>To establish point correspondences, I implemented a Tkinter interface to see to-be stitched photos side by side to find fitting reference points. The interface stores selections for each session in a JSON file. Here are some examples of my point correspondence selection. For stability, I aimed to get 15-20 pairs.</p> <div class="row"> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p3/balcony_set/b_corr1-480.webp 480w,/assets/img/cs180/p3/balcony_set/b_corr1-800.webp 800w,/assets/img/cs180/p3/balcony_set/b_corr1-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p3/balcony_set/b_corr1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="sel1" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p3/balcony_set/b_corr2-480.webp 480w,/assets/img/cs180/p3/balcony_set/b_corr2-800.webp 800w,/assets/img/cs180/p3/balcony_set/b_corr2-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p3/balcony_set/b_corr2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="sel2" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p class="text-center">Balcony set point correspondences.</p> <div class="row"> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p3/campanile_set/c_corr1-480.webp 480w,/assets/img/cs180/p3/campanile_set/c_corr1-800.webp 800w,/assets/img/cs180/p3/campanile_set/c_corr1-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p3/campanile_set/c_corr1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="sel1" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p3/campanile_set/c_corr2-480.webp 480w,/assets/img/cs180/p3/campanile_set/c_corr2-800.webp 800w,/assets/img/cs180/p3/campanile_set/c_corr2-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p3/campanile_set/c_corr2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="sel2" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p class="text-center">Campanile set point correspondences.</p> <p>The JSON file is structured as follows:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    "im1_pts": [
    [
      2909,
      3744
    ],
    [
      2971,
      3455
    ],
    ...],
    "im2_pts": [
    [
      1333,
      3751
    ],
    [
      1404,
      3439
    ],
    ...],
}
</code></pre></div></div> <h5 id="a2-recovering-homographies">A.2 Recovering Homographies</h5> <p>To compute the homography matrix $H$ I implemented the Direct Linear Transformation method. This approach essentially establishes a linear relationship between corresponding points in two images and solves for the transformation matrix that needs to be applied to the image using least squares.</p> <p>For each point correspondence $((x, y) \leftrightarrow (x’, y’))$, the homography satisfies:</p> \[\begin{aligned} x' &amp;= \frac{h_{11}x + h_{12}y + h_{13}}{h_{31}x + h_{32}y + 1}, \\ y' &amp;= \frac{h_{21}x + h_{22}y + h_{23}}{h_{31}x + h_{32}y + 1}. \end{aligned}\] <p>Rewriting these equations creates a linear system $A h = b$, where $h$ contains the 8 free parameters of $H$ we’re trying to fit to ($h_{8} = 1$). Finally, the solution vector $h$ is reshaped into the 3×3 homography matrix.</p> <p>My $computeH(im1_pts, im2_pts)$ implementation:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def computeH(im1_pts, im2_pts):
    n = len(im1_pts)
    
    # linear system of equations for all points (solving for 8 unknowns, H_8 fixed to 1)
    A = np.zeros((2*n, 8))
    b = np.zeros(2*n)

    for i in range(n):
        x1, y1 = im1_pts[i]
        x2, y2 = im2_pts[i]
        A[2*i]   = [x1, y1, 1, 0, 0, 0, -x1*x2, -y1*x2]
        b[2*i]   = x2
        A[2*i+1] = [0, 0, 0, x1, y1, 1, -x1*y2, -y1*y2]
        b[2*i+1] = y2

    # solve 
    h, _, _, _ = np.linalg.lstsq(A, b, rcond=None)
    H = np.array([[h[0], h[1], h[2]], [h[3], h[4], h[5]], [h[6], h[7], 1.0]])
    return H
</code></pre></div></div> <p>For example, for the first and second campanile set photos, our linear equations are:</p> <p>[ 292.25 = 621.50h_{11} + 67.00h_{12} + 1h_{13} - 181633.38h_{31} - 19580.75h_{32} ] [ 53.75 = 621.50h_{21} + 67.00h_{22} + 1h_{23} - 33405.62h_{31} - 3601.25h_{32} ] [ 364.50 = 719.00h_{11} + 645.00h_{12} + 1h_{13} - 262075.50h_{31} - 235102.50h_{32} ] [ 609.75 = 719.00h_{21} + 645.00h_{22} + 1h_{23} - 438410.25h_{31} - 393288.75h_{32} ] [ 230.00 = 567.75h_{11} + 379.50h_{12} + 1h_{13} - 130582.50h_{31} - 87285.00h_{32} ] [ 352.75 = 567.75h_{21} + 379.50h_{22} + 1h_{23} - 200273.81h_{31} - 133868.62h_{32} ] [ 265.25 = 606.25h_{11} + 336.00h_{12} + 1h_{13} - 160807.81h_{31} - 89124.00h_{32} ] [ 312.25 = 606.25h_{21} + 336.00h_{22} + 1h_{23} - 189301.56h_{31} - 104916.00h_{32} ] [ 240.00 = 588.00h_{11} + 744.00h_{12} + 1h_{13} - 141120.00h_{31} - 178560.00h_{32} ] [ 710.50 = 588.00h_{21} + 744.00h_{22} + 1h_{23} - 417774.00h_{31} - 528612.00h_{32} ] [ 216.50 = 566.00h_{11} + 826.50h_{12} + 1h_{13} - 122539.00h_{31} - 178937.25h_{32} ] [ 792.75 = 566.00h_{21} + 826.50h_{22} + 1h_{23} - 448696.50h_{31} - 655207.88h_{32} ] [ 38.50 = 393.00h_{11} + 414.75h_{12} + 1h_{13} - 15130.50h_{31} - 15967.88h_{32} ] [ 374.50 = 393.00h_{21} + 414.75h_{22} + 1h_{23} - 147178.50h_{31} - 155323.88h_{32} ] [ 238.50 = 589.50h_{11} + 937.25h_{12} + 1h_{13} - 140595.75h_{31} - 223534.12h_{32} ] [ 898.75 = 589.50h_{21} + 937.25h_{22} + 1h_{23} - 529813.12h_{31} - 842353.44h_{32} ] [ 314.00 = 675.25h_{11} + 865.00h_{12} + 1h_{13} - 212028.50h_{31} - 271610.00h_{32} ] [ 816.25 = 675.25h_{21} + 865.00h_{22} + 1h_{23} - 551172.81h_{31} - 706056.25h_{32} ] [ 320.75 = 685.25h_{11} + 982.75h_{12} + 1h_{13} - 219793.94h_{31} - 315217.06h_{32} ] [ 922.25 = 685.25h_{21} + 982.75h_{22} + 1h_{23} - 631971.81h_{31} - 906341.19h_{32} ] [ 208.25 = 537.50h_{11} + 90.50h_{12} + 1h_{13} - 111934.38h_{31} - 18846.62h_{32} ] [ 55.25 = 537.50h_{21} + 90.50h_{22} + 1h_{23} - 29696.88h_{31} - 5000.12h_{32} ] [ 223.25 = 557.75h_{11} + 265.25h_{12} + 1h_{13} - 124517.69h_{31} - 59217.06h_{32} ] [ 235.00 = 557.75h_{21} + 265.25h_{22} + 1h_{23} - 131071.25h_{31} - 62333.75h_{32} ] [ 38.50 = 398.00h_{11} + 614.75h_{12} + 1h_{13} - 15323.00h_{31} - 23667.88h_{32} ] [ 591.25 = 398.00h_{21} + 614.75h_{22} + 1h_{23} - 235317.50h_{31} - 363470.94h_{32} ] [ 50.25 = 409.75h_{11} + 740.75h_{12} + 1h_{13} - 20589.94h_{31} - 37222.69h_{32} ] [ 727.25 = 409.75h_{21} + 740.75h_{22} + 1h_{23} - 297990.69h_{31} - 538710.44h_{32} ] [ 75.50 = 436.75h_{11} + 876.75h_{12} + 1h_{13} - 32974.62h_{31} - 66194.62h_{32} ] [ 865.00 = 436.75h_{21} + 876.75h_{22} + 1h_{23} - 377788.75h_{31} - 758388.75h_{32} ] [ 305.75 = 651.75h_{11} + 579.50h_{12} + 1h_{13} - 199272.56h_{31} - 177182.12h_{32} ] [ 551.00 = 651.75h_{21} + 579.50h_{22} + 1h_{23} - 359114.25h_{31} - 319304.50h_{32} ] [ 270.25 = 601.25h_{11} + 141.00h_{12} + 1h_{13} - 162487.81h_{31} - 38105.25h_{32} ] [ 122.50 = 601.25h_{21} + 141.00h_{22} + 1h_{23} - 73653.12h_{31} - 17272.50h_{32} ]</p> <p>The recovered homography matrix is:</p> <p>[ H = \begin{bmatrix} 1.5833 &amp; -0.0352 &amp; -557.6588 <br> 0.3847 &amp; 1.4279 &amp; -257.9759 <br> 0.0007 &amp; 0.0000 &amp; 1.0000 \end{bmatrix} ]</p> <h5 id="a3-warping-the-images">A.3 Warping the Images</h5> <p>When warping images to align them for mosaics, the transformed pixel coordinates often do not align perfectly with the discrete pixel grid of the input image. To estimate the pixel values at these non-integer coordinates, I tested some interpolation methods. These methods ensure that the warped image accurately represents the input image.</p> <p>For Nearest Neighbor Interpolation, I rounded the transformed coordinates to the nearest integer values, effectively mapping each output pixel to the closest pixel in the input image. This method is efficient but can result in jagged edges due to the lack of smoothing.</p> <p>For Bilinear Interpolation, I computed the output pixel values as a weighted average of the four nearest neighbors in the input image. The weights were determined based on the fractional distances of the transformed coordinates from these neighbors. This approach provided smoother results, especially for continuous gradients.</p> <p>To confirm that the function works, I decided to rectify the third image in the desk set, by attempting to horizontally align the poster on the left side of the image.</p> <div class="row"> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p3/room_set/r6.JPG" sizes="95vw"></source> <img src="/assets/img/cs180/p3/room_set/r6.JPG" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="original" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p3/room_set/nn46-480.webp 480w,/assets/img/cs180/p3/room_set/nn46-800.webp 800w,/assets/img/cs180/p3/room_set/nn46-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p3/room_set/nn46.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="nn" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p3/room_set/bil46-480.webp 480w,/assets/img/cs180/p3/room_set/bil46-800.webp 800w,/assets/img/cs180/p3/room_set/bil46-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p3/room_set/bil46.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="bil" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p class="text-center">Left: Original, Center: Nearest Neighbor alignment, Right: Bilinear alignment.</p> <p>As can be seen, the poster alignment worked, using both warping functions. Next, I tested the functions using homography matrices computed using our correspondence points, warping them to match the perspective of the second image in the set.</p> <div class="row"> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p3/balcony_set/r2.JPG" sizes="95vw"></source> <img src="/assets/img/cs180/p3/balcony_set/r2.JPG" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="original" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p3/balcony_set/nn24-480.webp 480w,/assets/img/cs180/p3/balcony_set/nn24-800.webp 800w,/assets/img/cs180/p3/balcony_set/nn24-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p3/balcony_set/nn24.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="nn" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p3/balcony_set/bil24-480.webp 480w,/assets/img/cs180/p3/balcony_set/bil24-800.webp 800w,/assets/img/cs180/p3/balcony_set/bil24-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p3/balcony_set/bil24.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="bil" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p class="text-center">Left: Original (1st balcony image), Center: Nearest Neighbor alignment, Right: Bilinear alignment.</p> <div class="row"> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p3/balcony_set/r6.JPG" sizes="95vw"></source> <img src="/assets/img/cs180/p3/balcony_set/r6.JPG" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="original" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p3/balcony_set/nn46-480.webp 480w,/assets/img/cs180/p3/balcony_set/nn46-800.webp 800w,/assets/img/cs180/p3/balcony_set/nn46-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p3/balcony_set/nn46.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="nn" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p3/balcony_set/bil46-480.webp 480w,/assets/img/cs180/p3/balcony_set/bil46-800.webp 800w,/assets/img/cs180/p3/balcony_set/bil46-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p3/balcony_set/bil46.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="bil" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p class="text-center">Left: Original (3rd balcony image), Center: Nearest Neighbor alignment, Right: Bilinear alignment.</p> <div class="row"> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p3/campanile_set/r2.JPG" sizes="95vw"></source> <img src="/assets/img/cs180/p3/campanile_set/r2.JPG" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="original" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p3/campanile_set/nn24-480.webp 480w,/assets/img/cs180/p3/campanile_set/nn24-800.webp 800w,/assets/img/cs180/p3/campanile_set/nn24-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p3/campanile_set/nn24.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="nn" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p3/campanile_set/bil24-480.webp 480w,/assets/img/cs180/p3/campanile_set/bil24-800.webp 800w,/assets/img/cs180/p3/campanile_set/bil24-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p3/campanile_set/bil24.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="bil" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p class="text-center">Left: Original (1st campanile image), Center: Nearest Neighbor alignment, Right: Bilinear alignment.</p> <div class="row"> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p3/room_set/r2.JPG" sizes="95vw"></source> <img src="/assets/img/cs180/p3/room_set/r2.JPG" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="original" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p3/room_set/nn24-480.webp 480w,/assets/img/cs180/p3/room_set/nn24-800.webp 800w,/assets/img/cs180/p3/room_set/nn24-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p3/room_set/nn24.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="nn" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p3/room_set/bil24-480.webp 480w,/assets/img/cs180/p3/room_set/bil24-800.webp 800w,/assets/img/cs180/p3/room_set/bil24-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p3/room_set/bil24.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="bil" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p class="text-center">Left: Original (1st room image), Center: Nearest Neighbor alignment, Right: Bilinear alignment.</p> <p>In terms of runtime, warpImageNearestNeighbor averaged 0.115s, while warpImageBilinear averaged 0.165s. While warpImageNearestNeighbor is faster, it may produce lower-quality results because of its simplicity. warpImageBilinear creates smoother transformations.</p> <h5 id="a4-blending-the-images-into-a-mosaic">A.4 Blending the Images into a Mosaic</h5> <p>Finally, to create seamless mosaics, I used a weighted averaging technique to blend overlapping regions of the warped images. To do so, I determined the size of the final mosaic by projecting the corners of all images into the chosen reference frame. Each image was then warped into this common projection. For blending, I assigned higher weights to central regions of each image and gradually reduced weights towards the edges, ensuring a smooth transition between overlapping areas.</p> \[I_{out}(x, y) = \frac{\sum_{i} I_i(x, y) \cdot M_i(x, y)}{\sum_{i} M_i(x, y)}\] <p>where $I_i(x, y)$ is the intensity of the $i$-th image at pixel $(x, y)$, and $M_i(x, y)$ is the weight for the $i$-th image at that pixel. This approach minimized edge artifacts decently. Below are my results!</p> <div class="row"> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p3/room_set/room_mosaic-480.webp 480w,/assets/img/cs180/p3/room_set/room_mosaic-800.webp 800w,/assets/img/cs180/p3/room_set/room_mosaic-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p3/room_set/room_mosaic.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="original" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p class="text-center">Room Mosaic.</p> <div class="row"> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p3/balcony_set/balcony_mosaic-480.webp 480w,/assets/img/cs180/p3/balcony_set/balcony_mosaic-800.webp 800w,/assets/img/cs180/p3/balcony_set/balcony_mosaic-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p3/balcony_set/balcony_mosaic.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="original" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p class="text-center">Balcony Mosaic.</p> <div class="row"> <div class="col-sm"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/cs180/p3/campanile_set/campanile_mosaic-480.webp 480w,/assets/img/cs180/p3/campanile_set/campanile_mosaic-800.webp 800w,/assets/img/cs180/p3/campanile_set/campanile_mosaic-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/cs180/p3/campanile_set/campanile_mosaic.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="original" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p class="text-center">Campanile Mosaic.</p> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Cyprian Zander. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?c8a01c11a92744d44b093fc3bda915df" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>